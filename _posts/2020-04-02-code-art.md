---
layout:       post
title:        "代码的艺术"
date:         2020-04-02 12:00:00
header-style: text
catalog:      true
tags:
    - code
---

## 代码的艺术

什么是艺术？

人类应用的材料和工具通过审美、技巧、在激情与物质材料和心灵的相互作用下，充满激情与活力的创造性劳动。代码/编码可以成为艺术。

1. 借助的物质：计算机系统
2. 工具：设计、编写、编译、调试、测试...
3. 编译需要激情
4. 编译是非常有创造性的工作

代码是人类智慧的结晶，代码反应了一个团队\人的精神



软件工程师需要具备的素质：

技术：

+ 编码能力，数据结构，算法
+ 系统结构，操作系统，计算机网络，分布式系统

产品

+ 对业务的理解
+ 交互设计
+ 产品数据统计
+ 产品\业务运营
+ 项目管理

研究和创新

百度工程师称自己为RD: Research and Development

一个系统的工程师培养需要8-10年

coding的过程

+ 无序到有序
+ 现实世界的问题到数字世界的模型
+ 一个认识的过程

coding过程，需要：

+ 把握问题的能力
+ 建立模型的能力
+ 沟通协助的能力
+ 编码执行的能力

写好代码需要首先建立品味

好的代码从哪里来？

好的代码是多个环节工作的结果

+ 需求分析，系统设计
+ 编写代码，单元测试
+ 集成测试、上线、持续运营\迭代改进

一个好的系统\产品是以上过程时许循环的结果



## 需求分析、系统设计

1. 有很多人错误的认为，写代码才是最重要的事情
2. 有太多的项目，在没有搞清楚目标之前，就已经开始编码了
3. 有太多的项目，在代码基本编写完成后，才发现设计思路是有问题

软件开发规律和人的直觉往往是相反的。

在前期更多的投入，收益往往是最大的。

## 需求分析&系统设计

+ 有很多人无法搞清楚两者的差别，很多同学系统设计文档写成了需求分析文档或者在需求分析的文档中掺杂了很多系统设计的内容

### 需求分析

定义系统\软件黑盒的行为，也就是外部行为，从外部看实现了什么功能

+ 问题：怎么用寥寥数语勾勒出一个系统的功能
+ 每个系统都有自己的定位，以google GFS为例， GFS通过一些通用的硬件提供对数据高效，可靠的访问
+ 做需求分析还要把简单的具体的展开
+ 首先是个分布式文件系统，
+ 文件数量；文件大小的分布；总的存储容量
+ 读写的能力（读写次数，传输速率，读写延迟）
+ 容错能力，一致性方便的定位（强一致，弱一致）
+ 对外的借口（用户怎么使用），等等

需求分析

需求需要用精确的数字来刻画， 量变引起质变



### 系统设计

设计系统\软件白盒的机制，从内部讲怎么做出来的，以及为什么做出来

什么是系统架构

是一个概念的模型，他定义了这个系统的结构，行为，包括系统跟多的视图

做系统设计时几个要素要描述出来

1. 系统要完成哪些功能
2. 系统如何组成
3. 功能在这些组成部分之间如何划分

系统设计的注意

1. 系统设计的约束，比如资源的限制（计算、存储、IO/网络）
2. 需求时真正决定系统设计的决策来源
3. 在设计中，经常需要做trade-off, 需求是make decision的重要依据

## 系统设计的风格和哲学

1. 同样的需求下，可能出现不同的设计

和互联网Internet的差异
| 电信网络 | vs   | 电信网络   |
| -------- | ---- | ---------- |
| 中心控制 |      | 分布式系统 |
| 可靠组件 |      | 不可靠组建 |
复杂指令集vs简单指令集

好的系统都是在合适假设下的精准平衡，一个通用的系统，在某个是不如专用系统，所以互联网公司大部分全用的是专用系统使得性能，功能，资源消耗得到性价比最优

+ 还有就是系统中每个组件（子系统/子模块）的功能都应该足够专注单一，功能的单一是复用和扩展的基础
+ 子系统/子墨款之间的关系应该简单清晰，软件中最难控制的就是耦合（为什么尽量避免全局变量，在增加复杂性），如果你的接口设计的非常复杂，将来很难健康发展。

### 关于接口

系统对外的接口，比系统实现本身更重要（往往被忽略）

+ 接口定义了功能，如果功能不正确，系统就不可用
+ 接口决定了外部关系，相对于内部，外部关系确定后很难修改

那些事接口

+ 模块对外的函数接口
+ 平台对外的API，很多是基于 RPC，或者基于 Web API 来实现
+ 系统间通信的协议（问题：什么是协议）
+ 系统间存在依赖的数据（比如给另外一个系统提供的词表）

### 接口

一定是好用，合理，修改时尽量向前兼容



## 怎么成为优秀胡工程师

1. 学习思考实践（看书，开源代码 ，）
2. 知识，方法（发现和定义问题，然后解决问题），精神(完美的追求，)
3. 基础的建立（5到8年）

好代码是一系列工作的结果，



## 书单

1. 人月神话
2. 201个原理

伟大的代码永远是伟大团队精神

高效

鲁棒

简洁

简短

共享

可测试

可移植

可监控

可运维



## 怎么写代码

代码是表达方式

一个项目超过50%的时间是沟通，

切记：现在写代码就是为了让别人看懂

模块（Module）包括数据、类、函数

模块一定要做到单一职责，如何切分模块

#### 数据类的模块：主要完成对数据的封装：模块内部变量或者类的内部变量

对外提供明确的数据访问接口，数据结构和算法属于模块内部的工作

写程序要以数据为中心考虑，很多程序最后不好维护都是数据封装没做好。

#### 过程类模块，本身不含数据 ，调用其它模块，比如从文件里面读取一些数据，或都一些其他操作，

模块切分好以后就好重构。

### 类和函数

是两种不同的模型，有它们各自适用的范围

推荐：和类的成员变量无关的函数，作为一个独立的函数，不建立实现为类的成员函数，便于将来搬用

### 面向对象 

关于Object Oriented

OO的本质是数据的封装

+ 写程序应该从Data开始想问题
+ But 周围有太多人是从执行过程开始考虑问题
+ 多类和继承都是应该被谨慎使用的，对系统非常了解才可以，做好

### 模块内部的组成 

文件头：模块的说明：模块功能 的简要描述，修改历史：时间修改人，修改内容，其他必要说明

文件头的例子，可以上网找找

### 函数的切分

1. 功能描述，传入描述，返回描述
2. 函数短小
3. 有明确的语义，下面三中

逻辑判断型函数： 真或假

操作类型函数，成功或失败

获取数据型函数：有数据或没有数据



函数头因该怎么写，上网查。

单入口单出口胡写法

先写注视，后写代码

### 命名

首先要定义几个概念，然后推理其他名字

统计调用了，多少，成功了多少。





















