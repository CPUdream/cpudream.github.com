---
layout: post
title: Android屏幕适配大全
catalog: true
date: 2016-09-21
tags:
    - 屏幕适配
---

众所周知，Android机型尺寸各种各样，于是屏幕适配就成了Android开发中很重要的一环。Android屏幕适配可能一些开发者都会遇到这样的问题，今天就来分享下屏幕适配，你会发现其实Android屏幕适配也可以很简单。一般在项目快要上线的时候进行屏幕适配，前期适配不要适配因为布局在一直变化，只有当布局基本固定了再适配，一般只需要适配下面几种分辨率即可：**320 * 480(快绝迹了)、480 * 800、1280 * 1080（最主流）、1920 * 1080**。不用对平板进行<!--more-->适配，一般会重新开发一个APP。

### 一、基本概念和单位详解
介绍几个Android屏幕适配上非常重要的名词，一旦你掌握了这些概念，屏幕适配理解起来就简单多了
#### 1. 屏幕尺寸(in)、屏幕分辨率(px)、屏幕像素密度(dpi)、屏幕密度(density)、独立像素(dp)、字体大小(sp)的概念

+ **屏幕尺寸：**是指屏幕对角线的长度。单位是英寸，1英寸=2.54厘米。例如我们经常说的手机屏幕大小有，5（英）寸、4（英）寸就是指这个单位。这些尺寸是屏幕的对角线长度。如果手机的屏幕是4英寸，表示手机的屏幕（可视区域）对角线长度是4 X 2.54 = 10.16厘米。
+ **屏幕分辨率：**是指在横纵向上的像素点数，单位是px，1px=1像素点，一般是纵向像素横向像素，如1280×720，从下图可以看出最近几年Android设备分辨率的比例：![](/images/2016/0921androidscreensome.png)主流的分辨率是前六种：1280×720、1920×1080、800×480、854×480、960×540、1184×720<br/>
　　在设计领域中，像素是用来计算数码影像的最小单位。计算机中显示的图像并非连续的线条组成，而是由许多肉眼看不见的小点组成。如果把影像放大数倍，会发现这些连续色调其实是由许多色彩相近的小点所组成，这些小点就是构成影像的最小单位“像素”。由于是最小的独立显示单位，px均为整数，不会出现0.5px的情况。<br/>
+ **屏幕像素密度:**是指每英寸上的像素点数，单位是dpi，即“dot per inch”的缩写，像素密度和屏幕尺寸和屏幕分辨率有关。比如320X480分辨率的手机，宽2英寸，高3英寸, 每英寸包含的像素点的数量为320/2=160dpi（横向）或480/3=160dpi（纵向），160就是这部手机的dpi，横向和纵向的这个值都是相同的，原因是大部分手机屏幕使用正方形的像素点。
+ **屏幕密度：** density与dpi的关系density = dpi/160。小米手机分辨率很高但尺寸不大，就是因为屏幕密度大<br/>

```java
//得到屏幕密度
context.getResources().getDisplayMetrics();
//如果代码中用到了px我们最好用dp换算的到这样可以实现适配
```

+ **独立像素:**Android系统特有的概念和像素差不多,但是他有一个特点 dp = px/屏幕密度；在开发中尽量用dp他可以根据屏幕分辨率动态算出px，这样可以达到适配的效果
+ **字体大小** 和dp很类似，一般用来设置字体大小，和dp的区别是它可以根据用户的字体大小偏好来缩放

### 二、 常见的屏幕适配方案

#### 1. 图片适配

在我们建立Android工程时会自动生下下列drawable文件

+ ldpi············ 240*320
+ mdpi············ 320*480
+ hdpi············ 480*800（一般图片放在这里他可以兼顾高分辨和低分辨）
+ xhdpi············720*1280

**Android首先根据手机的分辨率在相对应的文件夹下选择图片如果没有该名称的图片再到相近的目录下寻找知道找见**

#### 2. 布局适配（不常用）

有一种需求就是想在不同的分辨率上显示不同的布局，这就用到了布局适配。怎么做呢？
我们可以复制一个layout把他命名为layout-800x480（x是小写的大的写在前面，小的写在后面），在这个文件夹里面只需要写需要适配的布局文件。布局文件只需要调整位置最好不要添加新的组件，因为有可能找不见组件。这个布局适配不常用。

#### 3. 尺寸适配（常用）

在建立项目时会在Values目录下自动生成dimens.xml文件，这个文件在声明我们的各种各样的尺寸只不是我们一般全在布局文件里面写死了（比如android:height=120dp）,dp适配了我们大部分的屏幕（动态的），但是也有些搞不定，所以我们要复制一个values(values-1280x720)写在自己想要的dp就好了。
为什么这个常用呢，因为假如用布局适配的话，如果要改变一个布局的东西，那另一个也要变，这样太不方便了，而尺寸适配只需要改一下数字就可以了

#### 4. 权重适配

布局简单的时候就可以用了，权重只能给LinearLayout用，有局限性。这个这里就不详细讲解了。

#### 5. 代码适配

代码适配是最后要考虑的，首先要考虑前几种方法：

```java
//得到当前的屏幕宽度和高度
WindowManager wm = (WindowManager)getSystemService(WINDOW_SERVICE);
int width = wm.getDefaultDisplay.getWidth();
int height = wm.getDefaultDisplay.getHeight();
//然后通过LayoutParams设置参数，几分之几之，或者百分比进行换算
```

### 开发经验

+ 多用相对布局和线性布局（权重）,用dp不用px,用sp不用px
+ 代码中如果必须写像素的话,将dp转为像素之后再设置









　　
